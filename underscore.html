<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Online Underscore</title>
    <meta name="Keywords" content="underscore,_,online,code">
    <meta name="Description" content="Underscore Online Test">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <script type="text/javascript" src="./bower_components/jquery/dist/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="https://raw.githubusercontent.com/jashkenas/underscore/78887cffb53ed372811b5cc1239e0ecdf701a5c8/underscore-min.js"></script> -->
    <script type="text/javascript">
    $(function() {
        let arr = [
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/master/underscore-min.js', text: '1.9.1(Lastest)' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/cbecaf0377a3fde1e25fdb3d3138b27466bc4eb7/underscore-min.js', text: '1.9.0' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/e4743ab712b8ab42ad4ccb48b155034d02394e4d/underscore-min.js', text: '1.8.3' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/19db749b190a7cb5a8b7ab1aab42c0e9dc517250/underscore-min.js', text: '1.8.2' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/834acb6dde9665b9d1c1700e3aeee7e253e9d76f/underscore-min.js', text: '1.8.1' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/1aed9ec063715cd6a69fdd42b29d4ee40b3a00b2/underscore-min.js', text: '1.8.0' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/da996e665deb0b69b257e80e3e257c04fde4191c/underscore-min.js', text: '1.7.0' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/1f4bf626f23a99f7a676f5076dc1b1475554c8f7/underscore-min.js', text: '1.6.0' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/101c10a60019fe870d21868835f65c25d64968fc/underscore-min.js', text: '1.5.2' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/edbf2952c2b71f81c6449aef384bdf233a0d63bc/underscore-min.js', text: '1.5.1' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/dedccb4e687c535655b3d6e11e3cc60cf4bdb862/underscore-min.js', text: '1.5.0' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/484bdb43ec4a9dd6a40e60a2d25317bec7aeb43f/underscore-min.js', text: '1.4.4' },
            { url: 'https://raw.githubusercontent.com/jashkenas/underscore/78887cffb53ed372811b5cc1239e0ecdf701a5c8/underscore-min.js', text: '1.4.3' }
        ];
        for (var i in arr) {
            $(".select").append('<option value="' + arr[i].url + '">' + arr[i].text + '</option>');
        }
        $(".select").val(arr[0].url);
        // console.log($(".select").val())
        console.log = function(output) {
            $('.output').val($('.output').val() + '\n' + output);
        }
        $('.run').click(function() {
            let input = $('.input').val();
            if (!input) return alert('Nothing!');
            else console.info('Input:', input)
            $('.output').val('');
            let url = $(".select").val();
            console.info($(".select").text(), $(".select").val())

            $.get(url, function(res) {
                console.info(res)
                window._ = undefined;
                eval(res.replace(".call(this);", "();"));
                let output = eval(input);
                console.log(output)
                // console.log(window._)
                // $('.output').val(output);
            });
        });
    });
    </script>
    <style type="text/css">
    body,
    * {
        color: white;
        background: #333;
    }

    .textarea {
        width: 100%;
        height: 100px;
        letter-spacing: 0.2em;
    }

    .select {
        margin: 5px 10px;
        outline: none;
    }

    .button {
        width: 100px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        border-radius: 10px;
        margin: 5px 10px;
        outline: none;
    }

    .small {
        font-size: 12px;
        text-align: center;
    }

    .text-center {
        text-align: center;
    }
    </style>
</head>

<body>
    <h1 class="text-center">Underscore在线测试代码</h1>
    <div>Version:
        <select class="select">
        </select>
    </div>
    <textarea class="textarea input"></textarea>
    <button type="button" class="run button" id="loadButton">Run</button>
    <textarea class="textarea output"></textarea>
    <div class="small">本页面支持最新多个版本的underscore，用于快速执行测试underscore代码。</div>
</body>